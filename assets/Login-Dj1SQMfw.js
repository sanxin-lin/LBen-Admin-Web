var le=Object.defineProperty,ae=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var _=(s,r,t)=>r in s?le(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,b=(s,r)=>{for(var t in r||(r={}))q.call(r,t)&&_(s,t,r[t]);if(E)for(var t of E(r))Q.call(r,t)&&_(s,t,r[t]);return s},v=(s,r)=>ae(s,ie(r));var P=(s,r)=>{var t={};for(var n in s)q.call(s,n)&&r.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&E)for(var n of E(s))r.indexOf(n)<0&&Q.call(s,n)&&(t[n]=s[n]);return t};var p=(s,r,t)=>new Promise((n,l)=>{var a=c=>{try{o(t.next(c))}catch(u){l(u)}},i=c=>{try{o(t.throw(c))}catch(u){l(u)}},o=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,i);o((t=t.apply(s,r)).next())});import{r as x,I as H,_ as J,u as ce,a as K,j as e,B as g,i as me,c as ue,b as X,d as Y,e as de,f as Z,g as xe,P as ge,h as he,k as fe,l as pe,m as je}from"./entry/index-Dbo3_afc-1721993229481.js";import{u as ye,A as we,a as Se,b as U}from"./index-D_FgYGML.js";import{u as B}from"./useDesign-mHzxmH92.js";import{u as w}from"./useLocale-DOr0Jbh6.js";import{I as y}from"./index-CoxTFKUG.js";import{F as S,C as ee}from"./index-imtmciXT.js";import{R as V,C as T}from"./row-CTndlXs8.js";import{D as se}from"./uniqueId-qqMk_9BJ.js";import{R as Ne,a as be,b as Re}from"./WechatFilled-DUbTolL4.js";import{Q as Ce}from"./index-CevsB5TR.js";import{S as Ie}from"./StrengthMeter-Co0Zel1d.js";import"./IconPicker-CgkkXBkI.js";import"./Loading-BsT2ninQ.js";import"./debounce-Cvb0dSk9.js";import"./index-CqkgspeZ.js";import"./logo-BtKfUar_.js";import"./useMenuSetting-Bic0zQ6z.js";import"./useRootSetting-D6paKIVO.js";import"./index-CWIbJN71.js";var ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm167 633.6C638.4 735 583 757 516.9 757c-95.7 0-178.5-54.9-218.8-134.9C281.5 589 272 551.6 272 512s9.5-77 26.1-110.1c40.3-80.1 123.1-135 218.8-135 66 0 121.4 24.3 163.9 63.8L610.6 401c-25.4-24.3-57.7-36.6-93.6-36.6-63.8 0-117.8 43.1-137.1 101-4.9 14.7-7.7 30.4-7.7 46.6s2.8 31.9 7.7 46.6c19.3 57.9 73.3 101 137 101 33 0 61-8.7 82.9-23.4 26-17.4 43.2-43.3 48.9-74H516.9v-94.8h230.7c2.9 16.1 4.4 32.8 4.4 50.1 0 74.7-26.7 137.4-73 180.1z"}}]},name:"google-circle",theme:"filled"},Pe=function(r,t){return x.createElement(H,J({},r,{ref:t,icon:ve}))},Te=x.forwardRef(Pe),Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm215.3 337.7c.3 4.7.3 9.6.3 14.4 0 146.8-111.8 315.9-316.1 315.9-63 0-121.4-18.3-170.6-49.8 9 1 17.6 1.4 26.8 1.4 52 0 99.8-17.6 137.9-47.4-48.8-1-89.8-33-103.8-77 17.1 2.5 32.5 2.5 50.1-2a111 111 0 01-88.9-109v-1.4c14.7 8.3 32 13.4 50.1 14.1a111.13 111.13 0 01-49.5-92.4c0-20.7 5.4-39.6 15.1-56a315.28 315.28 0 00229 116.1C492 353.1 548.4 292 616.2 292c32 0 60.8 13.4 81.1 35 25.1-4.7 49.1-14.1 70.5-26.7-8.3 25.7-25.7 47.4-48.8 61.1 22.4-2.4 44-8.6 64-17.3-15.1 22.2-34 41.9-55.7 57.6z"}}]},name:"twitter-circle",theme:"filled"},ke=function(r,t){return x.createElement(H,J({},r,{ref:t,icon:Fe}))},Ee=x.forwardRef(ke);const Le=""+new URL("login-box-bg-BwcHql23.svg",import.meta.url).href,ze=s=>{const[r,t]=x.useState(s),n=x.useRef(s),[l,a]=x.useState(!1);let i;const o=j=>{n.current=j,t(j)},c=()=>{i&&clearInterval(i),i=null},u=()=>{a(!1),c()},f=()=>{o(s),u()},d=()=>{l||i||(a(!0),i=setInterval(()=>{n.current===1?f():o(n.current-1)},1e3))},h=()=>{f(),d()};return ce(()=>{f()}),{start:d,reset:f,restart:h,clear:c,stop:u,currentCount:r,isStart:l}},Oe=s=>{const I=s,{value:r,count:t=60,beforeStart:n}=I,l=P(I,["value","count","beforeStart"]),{t:a}=w(),[i,o]=x.useState(!1),{currentCount:c,isStart:u,start:f,reset:d}=ze(t),h=K(()=>u?a("component.countdown.sendText",{count:c}):a("component.countdown.normalText"),[c,u]);x.useEffect(()=>{r===void 0&&d()},[r]);const j=()=>p(void 0,null,function*(){if(me(n)){o(!0);try{(yield n())&&f()}finally{o(!1)}}else f()});return e.jsx(g,v(b({},l),{disabled:u,loading:i,onClick:j,children:h}))},Ae=s=>{const o=s,{value:r,size:t,count:n=10,sendCodeApi:l}=o,a=P(o,["value","size","count","sendCodeApi"]),{prefixCls:i}=B("countdown-input");return e.jsx(y,v(b({},a),{value:r,className:i,size:t,addonAfter:e.jsx(Oe,{size:t,count:n,beforeStart:l,value:r})}))},D=Ae;var m=(s=>(s[s.LOGIN=0]="LOGIN",s[s.REGISTER=1]="REGISTER",s[s.RESET_PASSWORD=2]="RESET_PASSWORD",s[s.MOBILE=3]="MOBILE",s[s.QR_CODE=4]="QR_CODE",s))(m||{});const R=ue((s,r)=>({currentState:m.LOGIN,setLoginState(t){s({currentState:t})},handleBackLogin(){r().setLoginState(m.LOGIN)}})),k=s=>{const o=s,{className:r=""}=o,t=P(o,["className"]),{t:n}=w(),{currentState:l}=R(),i={[m.RESET_PASSWORD]:n("sys.login.forgetFormTitle"),[m.LOGIN]:n("sys.login.signInFormTitle"),[m.REGISTER]:n("sys.login.signUpFormTitle"),[m.MOBILE]:n("sys.login.mobileSignInFormTitle"),[m.QR_CODE]:n("sys.login.qrSignInFormTitle")}[l];return e.jsx("h2",v(b({},t),{className:`${r} mb-3 text-2xl font-bold text-center xl:text-3xl enter-x xl:text-left`,children:i}))},L=s=>[{required:!0,message:s,validateTrigger:"change"}],O=()=>{const{t:s}=w(),{currentState:r}=R(),[t]=S.useForm(),n=X(d=>d.localInfo.locale),l=L(s("sys.login.accountPlaceholder")),a=L(s("sys.login.passwordPlaceholder")),i=L(s("sys.login.smsPlaceholder")),o=L(s("sys.login.mobilePlaceholder")),c=(d,h)=>p(void 0,null,function*(){return h?Promise.resolve():Promise.reject(s("sys.login.policyPlaceholder"))}),u=(d,h)=>p(void 0,null,function*(){if(!h)return Promise.reject(s("sys.login.passwordPlaceholder"));const j=t.getFieldValue("password");return h!==j?Promise.reject(s("sys.login.diffPwd")):Promise.resolve()});return{formRules:K(()=>{const d={sms:i,mobile:o};switch(r){case m.REGISTER:return b({account:l,password:a,confirmPassword:[{validator:u,validateTrigger:"change",required:!0}],policy:[{validator:c,validateTrigger:"change",required:!0}]},d);case m.RESET_PASSWORD:return b({account:l},d);case m.MOBILE:return d;default:return{account:l,password:a}}},[r,n]),form:t}},z=S.Item,W={account:"",mobile:"",sms:""},Be=()=>{const{currentState:s,handleBackLogin:r}=R(),t=s===m.RESET_PASSWORD,{form:n,formRules:l}=O(),[a,i]=x.useState(!1),{t:o}=w();function c(){return p(this,null,function*(){i(!1),n&&n.setFieldsValue(b({},W))})}return t?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"enter-x"}),e.jsxs(S,{form:n,className:"p-4 enter-x",initialValues:W,children:[e.jsx(z,{className:"enter-x",name:"account",rules:l.account,children:e.jsx(y,{size:"large",placeholder:o("sys.login.userName")})}),e.jsx(z,{className:"enter-x",name:"mobile",rules:l.mobile,children:e.jsx(y,{size:"large",placeholder:o("sys.login.mobile")})}),e.jsx(z,{className:"enter-x",name:"sms",rules:l.sms,children:e.jsx(D,{size:"large",placeholder:o("sys.login.smsCode")})}),e.jsxs(z,{className:"enter-x",children:[e.jsx(g,{type:"primary",size:"large",block:!0,onClick:c,loading:a,children:o("common.resetText")}),e.jsx(g,{size:"large",block:!0,className:"mt-4",onClick:r,children:o("sys.login.backSignIn")})]})]})]}):null},De=()=>{const[s,r]=x.useState(!1);return[s,n=>p(void 0,null,function*(){try{r(!0),yield n(),r(!1)}catch(l){r(!1)}})]},F=S.Item,Me=()=>{const{login:s}=Y(),{currentState:r,setLoginState:t}=R(),n=de(N=>N.isDynamicAddedRoute),{setDynamicAddedRoute:l,buildRoutes:a}=Z(),i=r===m.LOGIN,{t:o}=w(),[c,u]=x.useState(!1),[f,d]=De(),{prefixCls:h}=B("login"),{formRules:j,form:I}=O(),M=xe(),{notification:te,createErrorModal:re}=he(),ne=N=>{u(N.target.checked)},oe=()=>p(void 0,null,function*(){d(()=>p(void 0,null,function*(){try{let gs;const N=I.getFieldsValue(),G=yield s({username:N.account,password:N.password,mode:"none",afterLoginAction($){return p(this,null,function*(){$&&(n||(yield a(),l(!0)),M($.homePath||ge.BASE_HOME,!0))})}});G&&te.success({message:o("sys.login.loginSuccessTitle"),description:`${o("sys.login.loginSuccessDesc")}: ${G.realName}`,duration:3})}catch(N){re({title:o("sys.api.errorTip"),content:N.message||o("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${h}`)||document.body})}}))});return i?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"enter-x"}),e.jsxs(S,{form:I,className:"p-4 enter-x",initialValues:{account:"sunshine",password:"123456"},onFinish:oe,children:[e.jsx(F,{name:"account",rules:j.account,children:e.jsx(y,{size:"large",className:"fix-auto-fill",placeholder:o("sys.login.userName")})}),e.jsx(F,{name:"password",rules:j.password,children:e.jsx(y.Password,{size:"large",visibilityToggle:!0,placeholder:o("sys.login.password")})}),e.jsxs(V,{className:"enter-x",children:[e.jsx(T,{span:12,children:e.jsx(F,{valuePropName:"checked",children:e.jsx(ee,{defaultChecked:!1,onChange:ne,children:o("sys.login.rememberMe")})})}),e.jsx(T,{span:12,children:e.jsx(F,{style:{textAlign:"right"},children:e.jsx(g,{type:"link",size:"small",onClick:()=>t(m.RESET_PASSWORD),children:o("sys.login.forgetPassword")})})}),e.jsx(F,{className:"enter-x w-full",children:e.jsx(g,{type:"primary",size:"large",block:!0,htmlType:"submit",loading:f,children:o("sys.login.loginButton")})})]}),e.jsxs(V,{className:"enter-x",gutter:[16,16],children:[e.jsx(T,{md:8,xs:24,children:e.jsx(g,{block:!0,onClick:()=>t(m.MOBILE),children:o("sys.login.mobileSignInFormTitle")})}),e.jsx(T,{md:8,xs:24,children:e.jsx(g,{block:!0,onClick:()=>t(m.QR_CODE),children:o("sys.login.qrSignInFormTitle")})}),e.jsx(T,{md:8,xs:24,children:e.jsx(g,{block:!0,onClick:()=>t(m.REGISTER),children:o("sys.login.registerButton")})})]}),e.jsx(se,{children:o("sys.login.otherSignIn")}),e.jsxs("div",{className:`${h}-sign-in-way flex justify-evenly enter-x`,children:[e.jsx(Ne,{}),e.jsx(be,{}),e.jsx(Re,{}),e.jsx(Te,{}),e.jsx(Ee,{})]})]})]}):null},A=S.Item,Ge=()=>{const{t:s}=w(),{handleBackLogin:r,currentState:t}=R(),n=t===m.MOBILE,[l,a]=x.useState(!1),{form:i,formRules:o}=O(),c=u=>{a(!0),a(!1)};return n?e.jsxs(e.Fragment,{children:[e.jsx(k,{}),e.jsxs(S,{className:"p-4 enter-x",form:i,onFinish:c,children:[e.jsx(A,{name:"mobile",className:"enter-x",rules:o.mobile,children:e.jsx(y,{size:"large",placeholder:s("sys.login.mobile"),className:"fix-auto-fill"})}),e.jsx(A,{name:"sms",className:"enter-x",rules:o.sms,children:e.jsx(D,{size:"large",className:"fix-auto-fill",placeholder:s("sys.login.smsCode")})}),e.jsxs(A,{className:"enter-x",children:[e.jsx(g,{type:"primary",size:"large",block:!0,loading:l,htmlType:"submit",children:s("sys.login.loginButton")}),e.jsx(g,{size:"large",block:!0,className:"mt-4",onClick:r,children:s("sys.login.backSignIn")})]})]})]}):null},$e=s=>{const r=P(s,[]),{currentState:t,handleBackLogin:n}=R(),l=t===m.QR_CODE,{t:a}=w(),i="https://rben.vvbin.cn/login";return l?e.jsxs("div",v(b({},r),{children:[e.jsx(k,{className:"enter-x"}),e.jsxs("div",{className:"enter-x min-w-64 min-h-64",children:[e.jsx(Ce,{value:i,className:"enter-x flex justify-center xl:justify-start",width:280}),e.jsx(se,{className:"enter-x",children:a("sys.login.scanSign")}),e.jsx(g,{size:"large",block:!0,className:"mt-4 enter-x",onClick:n,children:a("sys.login.backSignIn")})]})]})):null},C=S.Item,_e=y.Password,qe=()=>{const{form:s,formRules:r}=O(),{t}=w(),{currentState:n,handleBackLogin:l}=R(),[a,i]=x.useState(!1),o=n===m.REGISTER;function c(u){return p(this,null,function*(){i(!0),i(!1)})}return o?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"enter-x"}),e.jsxs(S,{className:"p-4 enter-x",form:s,initialValues:{account:"",password:"",confirmPassword:null,mobile:"",sms:"",policy:!1},onFinish:c,autoComplete:"off",children:[e.jsx(C,{name:"account",className:"enter-x",rules:r.account,children:e.jsx(y,{className:"fix-auto-fill",size:"large",placeholder:t("sys.login.userName")})}),e.jsx(C,{name:"mobile",className:"enter-x",rules:r.mobile,children:e.jsx(y,{size:"large",placeholder:t("sys.login.mobile"),className:"fix-auto-fill"})}),e.jsx(C,{name:"sms",className:"enter-x",rules:r.sms,children:e.jsx(D,{size:"large",className:"fix-auto-fill",placeholder:t("sys.login.smsCode")})}),e.jsx(C,{name:"password",className:"enter-x",rules:r.password,children:e.jsx(Ie,{size:"large",placeholder:t("sys.login.password")})}),e.jsx(C,{name:"confirmPassword",className:"enter-x",rules:r.confirmPassword,children:e.jsx(_e,{size:"large",visibilityToggle:!0,placeholder:t("sys.login.confirmPassword")})}),e.jsx(C,{className:"enter-x",name:"policy",rules:r.policy,valuePropName:"checked",children:e.jsx(ee,{children:t("sys.login.policy")})}),e.jsx(g,{type:"primary",className:"enter-x",size:"large",block:!0,loading:a,htmlType:"submit",children:t("sys.login.registerButton")}),e.jsx(g,{size:"large",block:!0,className:"mt-4 enter-x",onClick:l,children:t("sys.login.backSignIn")})]})]}):null},Qe=()=>{const{resetState:s}=Y(),{resetState:r}=ye(),{resetAllState:t}=fe(),{resetState:n}=Z();pe(()=>{s(),r(),t(),n()})},us=s=>{Qe();const{sessionTimeout:r}=s,{prefixCls:t}=B("login"),{t:n}=w(),l=X(o=>o.localInfo.showPicker),a=je(),i=a==null?void 0:a.title;return e.jsxs("div",{className:`${t} relative w-full h-full px-4`,children:[e.jsxs("div",{className:"absolute flex items-center right-4 top-4",children:[!r&&e.jsx(we,{className:"enter-x mr-2"}),!r&&l&&e.jsx(Se,{showText:!1,className:"text-white enter-x xl:text-gray-600"})]}),e.jsx("span",{className:"-enter-x xl:hidden",children:e.jsx(U,{alwaysShowTitle:!0})}),e.jsx("div",{className:"container relative h-full py-2 mx-auto sm:px-10",children:e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"hidden min-h-full pl-4 mr-4 xl:flex xl:flex-col xl:w-6/12",children:[e.jsx(U,{className:"-enter-x"}),e.jsxs("div",{className:"my-auto",children:[e.jsx("img",{alt:i,src:Le,className:"w-1/2 -mt-16 -enter-x"}),e.jsx("div",{className:"mt-10 font-medium text-white -enter-x",children:e.jsxs("span",{className:"inline-block mt-4 text-3xl",children:[" ",n("sys.login.signInTitle")]})}),e.jsx("div",{className:"mt-5 font-normal text-white dark:text-gray-500 -enter-x",children:n("sys.login.signInDesc")})]})]}),e.jsx("div",{className:"flex w-full h-full py-5 xl:h-auto xl:py-0 xl:my-0 xl:w-6/12",children:e.jsxs("div",{className:`${t}-form relative w-full px-5 py-8 mx-auto my-auto rounded-md shadow-md xl:ml-16 xl:bg-transparent sm:px-8 xl:p-4 xl:shadow-none sm:w-3/4 lg:w-2/4 xl:w-auto enter-x`,children:[e.jsx(Me,{}),e.jsx(Be,{}),e.jsx($e,{}),e.jsx(Ge,{}),e.jsx(qe,{})]})})]})})]})};export{us as default};
